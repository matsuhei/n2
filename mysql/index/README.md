## 課題
- db周りの理解、主にインデックスについて理解が浅い

## 目的
- indexを正しいタイミングで用いることができる状態にする
- 利用用途やアンチパターンを知り、最適化する方法を考えられるようにする
- db周りの処理でいろいろ試してみる

## やったこと
- indexをつけたケースとつけなかったケースの時間の確認
- select N+1が発生したときにどのくらいの差があるのかの検証
- 複合indexの聞かないパターンの確認

## 結果
- indexをつけたケースとつけなかったケースの時間の確認
    - indexありとなしでは10000件でも2倍ぐらいの差があるため、indexの利用
- N+1: ユーザーの複数件数取得時を想定して実行 
  - 条件: 10000件に対して、3000件ほど取得する形にしたとき
    - 単体取得: 8323ms
    - In句にて取得: 39ms
- 複合indexの順番で単体取得のindexが効くかどうか決まる
  - index(A, B)の場合、where Aは効くが、Bは効かない
  
## 結論
- select時にwhere句を用いる場合は、primary, uniqueでない場合などはINDEXをつけることを検討しないとスロークエリの温床になる
- 件数に応じてIn句で解決するパターンをチェックした
  - N+1のNがそもそも必要なければ消す、少ないなら今回のIn句で対応でも良さそう

## 気づき
- domaのBatchInsertはまとめてInsertではなく、Listに対して一つずつInsertをするためデータをまとめていれる際にデータが多いときは有効ではない
- 