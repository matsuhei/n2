## 例外処理の勉強

1. 例外的状態にだけ例外を使用する
   - 例外を使用すべきでないところで利用しない(配列のループを抜け出すために用いるなど)
2. 回復可能な状態にはチェックされる例外をプログラミングには実行時例外を使用する
   - チェックされる例外: runtime以外のexception 回復可能
   - 実行時例外: runtime やり方次第で回避可能
   - Errorクラス: outOfMemoryなどの復旧不可なもの
3. チェックされる例外を不必要に使用するのを避ける
   - チェックされる例外
4. 標準例外を使用する
   - JDKで提供される例外クラスを基本的に使う (NullPointerException, IllegalArgumentExceptionなど)
5. 抽象概念に適した例外をスローする
    - 例外翻訳と例外連鎖をうまく使おう
        - 例外翻訳: 上位レイヤーで発生した例外を下位レイヤーでcatchして情報を追加してからthrow、下位レイヤーで例外が発生しないように作りなるべく利用しない(この形を見たことがある)
        - 例外連鎖: 例外翻訳するときに上位例外へ下位例外の例外オブジェクトとして格納してthrow
6. 各メソッドがスローする全ての例外を文章化する
    - ドキュメントはjavadocに書く
    - throwの原因がわからない状態はまずいため、Exceptionだけでまとめず、小分けして全ての例外について記載すべき
7. 詳細メッセージにエラー記録情報を含める
    - catchした際に何が原因かどうか出すようにする
    - スタックトレース重要
8. エラーアトミック性に努める
    - エラーアトミック: 処理が失敗したときにオブジェクトをエラー発生前の状態に戻すこと
    - 実現方法
        1. 不変オブジェクトを設計: 上を考える必要がない
        2. 処理前に確認: 発生する前に対処
        3. 回復コード: 発生後回復用コードを記載
        4. 一時コピーを使用: 破壊的な更新を防ぐ
9. 例外を無視しない
    - try-catchで例外を握り潰しはしない
    - ケースによっては必要になるが、必ずログ出しなど検知できるようにする

### 参考書籍

- Effective Java 10章
